{"ast":null,"code":"var _jsxFileName = \"/Users/valeria/Desktop/Files/wep-app/src/components/ProductList/ProductList.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './ProductList.css';\nimport ProductItem from \"../ProductItem/ProductItem\";\nimport { useTelegram } from \"../../hooks/useTelegram\";\nimport { useCallback, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst products = [{\n  id: '1',\n  title: 'Джинсы',\n  price: 5000,\n  description: 'Синего цвета, прямые'\n}, {\n  id: '2',\n  title: 'Куртка',\n  price: 12000,\n  description: 'Зеленого цвета, теплая'\n}, {\n  id: '3',\n  title: 'Джинсы 2',\n  price: 5000,\n  description: 'Синего цвета, прямые'\n}, {\n  id: '4',\n  title: 'Куртка 8',\n  price: 122,\n  description: 'Зеленого цвета, теплая'\n}, {\n  id: '5',\n  title: 'Джинсы 3',\n  price: 5000,\n  description: 'Синего цвета, прямые'\n}, {\n  id: '6',\n  title: 'Куртка 7',\n  price: 600,\n  description: 'Зеленого цвета, теплая'\n}, {\n  id: '7',\n  title: 'Джинсы 4',\n  price: 5500,\n  description: 'Синего цвета, прямые'\n}, {\n  id: '8',\n  title: 'Куртка 5',\n  price: 12000,\n  description: 'Зеленого цвета, теплая'\n}];\n\nconst getTotalPrice = function () {\n  let items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return items.reduce((acc, item) => {\n    return acc += item.price;\n  }, 0);\n};\n\nconst ProductList = () => {\n  _s();\n\n  const [addedItems, setAddedItems] = useState([]);\n  const {\n    tg,\n    queryId\n  } = useTelegram();\n  const onSendData = useCallback(() => {\n    const data = {\n      products: addedItems,\n      totalPrice: getTotalPrice(addedItems),\n      queryId\n    };\n    fetch('http://85.119.146.179:8000/web-data', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n  }, [addedItems]);\n  useEffect(() => {\n    tg.onEvent('mainButtonClicked', onSendData);\n    return () => {\n      tg.offEvent('mainButtonClicked', onSendData);\n    };\n  }, [onSendData]);\n\n  const onAdd = product => {\n    const alreadyAdded = addedItems.find(item => item.id === product.id);\n    let newItems = [];\n\n    if (alreadyAdded) {\n      newItems = addedItems.filter(item => item.id !== product.id);\n    } else {\n      newItems = [...addedItems, product];\n    }\n\n    setAddedItems(newItems);\n\n    if (newItems.length === 0) {\n      tg.MainButton.hide();\n    } else {\n      tg.MainButton.show();\n      tg.MainButton.setParams({\n        text: `Купить ${getTotalPrice(newItems)}`\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'list',\n    children: products.map(item => /*#__PURE__*/_jsxDEV(ProductItem, {\n      product: item,\n      onAdd: onAdd,\n      className: 'item'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductList, \"jAX2T+hqSZ3yM/q+7CCaaWi+GhQ=\", false, function () {\n  return [useTelegram];\n});\n\n_c = ProductList;\nexport default ProductList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","ProductItem","useTelegram","useCallback","useEffect","products","id","title","price","description","getTotalPrice","items","reduce","acc","item","ProductList","addedItems","setAddedItems","tg","queryId","onSendData","data","totalPrice","fetch","method","headers","body","JSON","stringify","onEvent","offEvent","onAdd","product","alreadyAdded","find","newItems","filter","length","MainButton","hide","show","setParams","text","map"],"sources":["/Users/valeria/Desktop/Files/wep-app/src/components/ProductList/ProductList.jsx"],"sourcesContent":["import React, {useState} from 'react';\nimport './ProductList.css';\nimport ProductItem from \"../ProductItem/ProductItem\";\nimport {useTelegram} from \"../../hooks/useTelegram\";\nimport {useCallback, useEffect} from \"react\";\n\nconst products = [\n    {id: '1', title: 'Джинсы', price: 5000, description: 'Синего цвета, прямые'},\n    {id: '2', title: 'Куртка', price: 12000, description: 'Зеленого цвета, теплая'},\n    {id: '3', title: 'Джинсы 2', price: 5000, description: 'Синего цвета, прямые'},\n    {id: '4', title: 'Куртка 8', price: 122, description: 'Зеленого цвета, теплая'},\n    {id: '5', title: 'Джинсы 3', price: 5000, description: 'Синего цвета, прямые'},\n    {id: '6', title: 'Куртка 7', price: 600, description: 'Зеленого цвета, теплая'},\n    {id: '7', title: 'Джинсы 4', price: 5500, description: 'Синего цвета, прямые'},\n    {id: '8', title: 'Куртка 5', price: 12000, description: 'Зеленого цвета, теплая'},\n]\n\nconst getTotalPrice = (items = []) => {\n    return items.reduce((acc, item) => {\n        return acc += item.price\n    }, 0)\n}\n\nconst ProductList = () => {\n    const [addedItems, setAddedItems] = useState([]);\n    const {tg, queryId} = useTelegram();\n\n    const onSendData = useCallback(() => {\n        const data = {\n            products: addedItems,\n            totalPrice: getTotalPrice(addedItems),\n            queryId,\n        }\n        fetch('http://85.119.146.179:8000/web-data', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n        })\n    }, [addedItems])\n\n    useEffect(() => {\n        tg.onEvent('mainButtonClicked', onSendData)\n        return () => {\n            tg.offEvent('mainButtonClicked', onSendData)\n        }\n    }, [onSendData])\n\n    const onAdd = (product) => {\n        const alreadyAdded = addedItems.find(item => item.id === product.id);\n        let newItems = [];\n\n        if(alreadyAdded) {\n            newItems = addedItems.filter(item => item.id !== product.id);\n        } else {\n            newItems = [...addedItems, product];\n        }\n\n        setAddedItems(newItems)\n\n        if(newItems.length === 0) {\n            tg.MainButton.hide();\n        } else {\n            tg.MainButton.show();\n            tg.MainButton.setParams({\n                text: `Купить ${getTotalPrice(newItems)}`\n            })\n        }\n    }\n\n    return (\n        <div className={'list'}>\n            {products.map(item => (\n                <ProductItem\n                    product={item}\n                    onAdd={onAdd}\n                    className={'item'}\n                />\n            ))}\n        </div>\n    );\n};\n\nexport default ProductList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}